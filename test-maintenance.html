<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Maintenance Mode</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 16px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }

    .section h2 {
      font-size: 18px;
      color: #333;
      margin-bottom: 15px;
    }

    .section p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 15px;
      font-size: 14px;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 5px;
      min-width: 200px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
    }

    button:active {
      transform: translateY(0);
    }

    .danger {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
    }

    .success {
      background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
    }

    .warning {
      background: linear-gradient(135deg, #ffa94d 0%, #fd7e14 100%);
    }

    .code {
      background: #2d3748;
      color: #68d391;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      overflow-x: auto;
      margin: 15px 0;
      line-height: 1.6;
    }

    .status {
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      font-weight: 600;
    }

    .status.active {
      background: #fff3bf;
      color: #997404;
      border: 2px solid #ffd43b;
    }

    .status.inactive {
      background: #d3f9d8;
      color: #2b8a3e;
      border: 2px solid #69db7c;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }

      h1 {
        font-size: 24px;
      }

      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üõ†Ô∏è Test Maintenance Mode</h1>
    <p class="subtitle">C√¥ng c·ª• test h·ªá th·ªëng b·∫£o tr√¨ t·ª± ƒë·ªông</p>

    <div class="section">
      <h2>üìä Tr·∫°ng Th√°i Hi·ªán T·∫°i</h2>
      <div id="status" class="status inactive">
        ‚úÖ H·ªá th·ªëng ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng
      </div>
    </div>

    <div class="section">
      <h2>üß™ Test 1: Trigger Maintenance Th·ªß C√¥ng</h2>
      <p>K√≠ch ho·∫°t maintenance mode ngay l·∫≠p t·ª©c b·∫±ng CustomEvent</p>
      <div class="buttons">
        <button onclick="triggerMaintenance()">üö® Trigger Maintenance</button>
      </div>
    </div>

    <div class="section">
      <h2>üî• Test 2: G√¢y L·ªói API (3 l·∫ßn)</h2>
      <p>G·ªçi API endpoint kh√¥ng t·ªìn t·∫°i 3 l·∫ßn ƒë·ªÉ trigger t·ª± ƒë·ªông</p>
      <div class="buttons">
        <button class="danger" onclick="causeAPIErrors()">üí• G√¢y L·ªói API</button>
      </div>
    </div>

    <div class="section">
      <h2>üíæ Test 3: Set LocalStorage</h2>
      <p>Set maintenance mode tr·ª±c ti·∫øp v√†o localStorage</p>
      <div class="buttons">
        <button class="warning" onclick="setLocalStorageMaintenance()">üìù Set LocalStorage</button>
      </div>
    </div>

    <div class="section">
      <h2>üîÑ Reset & Clear</h2>
      <p>X√≥a maintenance mode v√† reset h·ªá th·ªëng</p>
      <div class="buttons">
        <button class="success" onclick="clearMaintenance()">‚ú® Clear Maintenance</button>
      </div>
    </div>

    <div class="section">
      <h2>üìñ Console Code</h2>
      <p>Copy code n√†y v√†o console c·ªßa ·ª©ng d·ª•ng React:</p>
      <div class="code">
// Trigger maintenance mode<br>
const event = new CustomEvent('maintenanceMode', {<br>
&nbsp;&nbsp;detail: { error: { message: 'Test', status: 500 } }<br>
});<br>
window.dispatchEvent(event);<br>
<br>
// Clear maintenance mode<br>
localStorage.removeItem('maintenanceMode');<br>
localStorage.removeItem('maintenanceError');<br>
window.location.reload();
      </div>
    </div>
  </div>

  <script>
    // C·∫≠p nh·∫≠t status
    function updateStatus() {
      const status = document.getElementById('status');
      const isMaintenanceMode = localStorage.getItem('maintenanceMode') === 'true';
      
      if (isMaintenanceMode) {
        status.className = 'status active';
        status.innerHTML = 'üö® Maintenance Mode ACTIVE';
      } else {
        status.className = 'status inactive';
        status.innerHTML = '‚úÖ H·ªá th·ªëng ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng';
      }
    }

    // Test 1: Trigger th·ªß c√¥ng
    function triggerMaintenance() {
      const event = new CustomEvent('maintenanceMode', {
        detail: { 
          error: {
            message: 'Test maintenance mode - Triggered manually',
            status: 500,
            timestamp: new Date().toISOString()
          }
        }
      });
      
      window.dispatchEvent(event);
      
      // Set localStorage backup
      localStorage.setItem('maintenanceMode', 'true');
      localStorage.setItem('maintenanceError', JSON.stringify({
        message: 'Test maintenance mode - Triggered manually',
        status: 500,
        timestamp: new Date().toISOString()
      }));
      
      alert('‚úÖ Maintenance mode triggered!\nReload trang React ƒë·ªÉ th·∫•y k·∫øt qu·∫£.');
      updateStatus();
    }

    // Test 2: G√¢y l·ªói API
    async function causeAPIErrors() {
      console.log('üî• B·∫Øt ƒë·∫ßu g√¢y l·ªói API...');
      
      const fakeEndpoint = 'https://this-does-not-exist-12345.com/api/test';
      
      for (let i = 1; i <= 3; i++) {
        try {
          await fetch(fakeEndpoint);
        } catch (error) {
          console.error(`‚ùå L·ªói ${i}/3:`, error.message);
        }
        
        // Delay nh·ªè gi·ªØa c√°c requests
        await new Promise(resolve => setTimeout(resolve, 500));
      }
      
      alert('‚úÖ ƒê√£ g√¢y 3 l·ªói API!\nKi·ªÉm tra console v√† reload trang React.');
      updateStatus();
    }

    // Test 3: Set localStorage
    function setLocalStorageMaintenance() {
      localStorage.setItem('maintenanceMode', 'true');
      localStorage.setItem('maintenanceError', JSON.stringify({
        message: 'Server ƒëang b·∫£o tr√¨ - ƒê∆∞·ª£c set t·ª´ localStorage',
        status: 503,
        timestamp: new Date().toISOString()
      }));
      
      alert('‚úÖ ƒê√£ set localStorage!\nReload trang React ƒë·ªÉ th·∫•y maintenance page.');
      updateStatus();
    }

    // Clear maintenance
    function clearMaintenance() {
      localStorage.removeItem('maintenanceMode');
      localStorage.removeItem('maintenanceError');
      
      alert('‚úÖ ƒê√£ clear maintenance mode!\nReload trang ƒë·ªÉ v·ªÅ tr·∫°ng th√°i b√¨nh th∆∞·ªùng.');
      updateStatus();
    }

    // Update status on load
    updateStatus();
    
    // Auto update every 2 seconds
    setInterval(updateStatus, 2000);
  </script>
</body>
</html>
